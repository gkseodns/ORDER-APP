# 커피 주문 앱

## 1. 프로젝트 개요

### 1.1 프로젝트명
커피 주문 앱

### 1.2 프로젝트 목적
사용자가 커피 메뉴를 주문하고, 관리자가 주문을 관리할 수 있는 간단한 풀스택 웹 앱

### 1.3 개발 범위
- 주문하기 화면(메뉴 선택 및 장바구니 기능)
- 관리자 화면(재고 관리 및 주문 상태 관리)
- 데이터를 생성/조회/수정/삭제할 수 있는 기능

## 2. 기술 스택
- 프런트엔드: HTML, CSS, 리액트, 자바스크립트
- 백엔드: Node.js, Express
- 데이터베이스: MSSQL (Microsoft SQL Server)

## 3. 기본 사항
- 프런트엔드와 백엔드를 따로 개발
- 기본적인 웹 기술만 사용
- 학습 목적이므로 사용자 인증이나 결제 기능은 제외
- 메뉴는 커피 메뉴만 있음

## 4. 주문하기 화면 PRD

### 4.1 화면 개요
사용자가 커피 메뉴를 선택하고 장바구니에 담아 주문할 수 있는 메인 화면입니다.

### 4.2 화면 레이아웃 구조
화면은 크게 3개의 영역으로 구성됩니다:
1. **상단 네비게이션 바**
2. **중앙 제품 표시 영역**
3. **하단 장바구니 요약 영역**

### 4.3 상단 네비게이션 바

#### 4.3.1 구성 요소
- **좌측**: 브랜드명 "COZY" 표시
- **우측**: 두 개의 버튼
  - "주문하기" 버튼: 현재 화면을 나타내는 버튼 (현재 주문하기 화면에 있으므로 활성화 상태)
  - "관리자" 버튼: 관리자 화면으로 이동하는 버튼

#### 4.3.2 기능 요구사항
- "관리자" 버튼 클릭 시 관리자 화면으로 이동
- "주문하기" 버튼은 현재 화면 표시용 (클릭 시 현재 화면 유지)

### 4.4 중앙 제품 표시 영역

#### 4.4.1 제품 카드 구조
각 제품은 카드 형태로 표시되며, 다음 정보를 포함합니다:

1. **제품 이미지**
   - 정사각형 이미지 영역
   - 이미지가 없을 경우 플레이스홀더 표시

2. **제품명**
   - 예: "아메리카노(ICE)", "아메리카노(HOT)", "카페라떼"

3. **가격**
   - 숫자 형식: "4,000원", "5,000원" 등
   - 천 단위 구분 기호(쉼표) 사용

4. **제품 설명**
   - 간단한 설명 텍스트
   - 예: "간단한 설명..."

5. **옵션 선택 (체크박스)**
   - "샷 추가(+500원)": 체크 시 추가 가격 500원
   - "시럽 추가(+0원)": 체크 시 추가 가격 없음
   - 여러 옵션 동시 선택 가능
   - 옵션 선택 시 가격이 실시간으로 반영되어야 함

6. **담기 버튼**
   - 각 카드 하단에 위치
   - 클릭 시 선택된 옵션과 함께 장바구니에 추가

#### 4.4.2 레이아웃
- 제품 카드는 가로로 나열 (반응형 디자인 고려)
- 카드 간 적절한 간격 유지
- 스크롤 가능한 영역 (제품이 많을 경우)

#### 4.4.3 기능 요구사항
- 옵션 선택 시 실시간 가격 계산 및 표시
- "담기" 버튼 클릭 시:
  - 선택된 옵션 정보와 함께 장바구니에 추가
  - 동일한 제품+옵션 조합이 이미 장바구니에 있으면 수량 증가
  - 장바구니에 추가 후 하단 장바구니 영역 업데이트
  - 사용자에게 추가 완료 피드백 제공 (선택사항)

### 4.5 하단 장바구니 요약 영역

#### 4.5.1 구성 요소
1. **제목**: "장바구니"

2. **장바구니 아이템 목록**
   - 각 아이템은 다음 정보를 표시:
     - 제품명 및 선택된 옵션: "아메리카노(ICE) (샷추가)"
     - 수량: "X 1", "X 2" 등
     - 개별 가격: "4,500원", "8,000원" 등
   - 예시:
     - "아메리카노(ICE) (샷추가) X 1" - 4,500원
     - "아메리카노(HOT) X 2" - 8,000원

3. **총 금액**
   - "총금액 12,500원" 형식으로 표시
   - 모든 장바구니 아이템의 합계 금액

4. **주문하기 버튼**
   - 장바구니에 아이템이 있을 때만 활성화
   - 클릭 시 주문 완료 처리

#### 4.5.2 기능 요구사항
- 장바구니가 비어있을 때:
  - 빈 장바구니 메시지 표시 또는 숨김 처리
  - 주문하기 버튼 비활성화
- 장바구니 아이템 추가/삭제 시 실시간 업데이트
- 총 금액 자동 계산 및 표시
- 주문하기 버튼 클릭 시:
  - 주문 데이터를 서버로 전송
  - 주문 완료 후 장바구니 초기화
  - 주문 완료 메시지 표시 (선택사항)

### 4.6 데이터 구조

#### 4.6.1 제품 데이터
```javascript
{
  id: number,
  name: string,        // 예: "아메리카노(ICE)"
  price: number,      // 기본 가격 (예: 4000)
  description: string,
  imageUrl: string,   // 이미지 URL
  options: [
    {
      id: number,
      name: string,    // 예: "샷 추가"
      price: number   // 추가 가격 (예: 500)
    }
  ]
}
```

#### 4.6.2 장바구니 아이템 데이터
```javascript
{
  productId: number,
  productName: string,
  basePrice: number,
  selectedOptions: [
    {
      optionId: number,
      optionName: string,
      optionPrice: number
    }
  ],
  quantity: number,
  totalPrice: number  // (basePrice + sum(optionPrice)) * quantity
}
```

#### 4.6.3 주문 데이터
```javascript
{
  items: [
    {
      productId: number,
      productName: string,
      options: array,
      quantity: number,
      price: number
    }
  ],
  totalAmount: number,
  orderDate: timestamp
}
```

### 4.7 사용자 인터랙션 시나리오

1. **메뉴 선택 및 장바구니 추가**
   - 사용자가 제품 카드에서 옵션을 선택
   - "담기" 버튼 클릭
   - 하단 장바구니에 아이템 추가됨

2. **장바구니 확인**
   - 하단 장바구니 영역에서 선택한 아이템과 총 금액 확인

3. **주문 완료**
   - "주문하기" 버튼 클릭
   - 주문이 서버로 전송되고 완료 처리

### 4.8 UI/UX 요구사항
- 반응형 디자인: 모바일, 태블릿, 데스크톱 지원
- 직관적인 레이아웃: 사용자가 쉽게 메뉴를 선택하고 주문할 수 있도록
- 실시간 가격 계산: 옵션 선택 시 즉시 가격 반영
- 명확한 피드백: 버튼 클릭, 장바구니 추가 등에 대한 시각적 피드백

## 5. 관리자 화면 PRD

### 5.1 화면 개요
관리자가 재고를 관리하고 주문 상태를 확인 및 관리할 수 있는 관리자 전용 화면입니다.

### 5.2 화면 레이아웃 구조
화면은 크게 4개의 영역으로 구성됩니다:
1. **상단 네비게이션 바**
2. **관리자 대시보드 영역**
3. **재고 현황 영역**
4. **주문 현황 영역**

### 5.3 상단 네비게이션 바

#### 5.3.1 구성 요소
- **좌측**: 브랜드명 "COZY" 표시
- **우측**: 두 개의 버튼
  - "주문하기" 버튼: 주문하기 화면으로 이동하는 버튼 (비활성화 상태)
  - "관리자" 버튼: 현재 화면을 나타내는 버튼 (현재 관리자 화면에 있으므로 활성화 상태)

#### 5.3.2 기능 요구사항
- "주문하기" 버튼 클릭 시 주문하기 화면으로 이동
- "관리자" 버튼은 현재 화면 표시용 (클릭 시 현재 화면 유지)

### 5.4 관리자 대시보드 영역

#### 5.4.1 구성 요소
1. **제목**: "관리자 대시보드"

2. **주문 통계 요약**
   - 다음 4가지 통계를 표시:
     - 총 주문: 전체 주문 건수
     - 주문 접수: 접수된 주문 건수
     - 제조 중: 현재 제조 중인 주문 건수
     - 제조완료: 제조가 완료된 주문 건수
   - 표시 형식: "총 주문 1 / 주문 접수 1 / 제조 중 0 / 제조완료 0"
   - 각 통계는 실시간으로 업데이트되어야 함

#### 5.4.2 기능 요구사항
- 주문 상태 변경 시 통계 자동 업데이트
- 통계는 서버에서 최신 데이터를 가져와 표시
- 주문 상태별로 카운트하여 표시

### 5.5 재고 현황 영역

#### 5.5.1 구성 요소
1. **제목**: "재고 현황"

2. **제품별 재고 카드**
   - 각 제품은 카드 형태로 표시되며, 다음 정보를 포함:
     - **제품명**: 예: "아메리카노(ICE)", "아메리카노(HOT)", "카페라떼"
     - **현재 재고 수량**: "10 개" 형식으로 표시
     - **재고 조정 버튼**:
       - "+" 버튼: 재고 증가
       - "-" 버튼: 재고 감소

#### 5.5.2 레이아웃
- 제품 카드는 가로로 나열 (반응형 디자인 고려)
- 카드 간 적절한 간격 유지
- 모든 제품의 재고 현황을 한눈에 확인 가능하도록 배치

#### 5.5.3 기능 요구사항
- "+" 버튼 클릭 시:
  - 해당 제품의 재고 수량이 1 증가
  - 변경 사항이 서버에 즉시 반영
  - 화면에 업데이트된 재고 수량 표시
- "-" 버튼 클릭 시:
  - 해당 제품의 재고 수량이 1 감소
  - 재고가 0 이하로 내려가지 않도록 제한 (선택사항)
  - 변경 사항이 서버에 즉시 반영
  - 화면에 업데이트된 재고 수량 표시
- 재고 변경 시 실시간 업데이트
- 재고 부족 시 시각적 경고 표시 (선택사항)

### 5.6 주문 현황 영역

#### 5.6.1 구성 요소
1. **제목**: "주문현황"

2. **주문 목록**
   - 각 주문은 다음 정보를 표시:
     - **주문 일시**: "7월 31일 13:00" 형식으로 표시
     - **주문 아이템 및 수량**: "아메리카노(ICE) X 1" 형식
       - 옵션이 있는 경우 옵션 정보도 함께 표시 (예: "아메리카노(ICE) (샷추가) X 1")
     - **주문 금액**: "4,000원" 형식으로 표시
     - **주문 상태 버튼**: 주문 상태에 따라 다른 버튼 표시
       - "주문 접수" 버튼: 주문이 접수되지 않은 상태일 때 표시
       - "제조 중" 버튼: 주문 접수 후 제조 시작 시 표시
       - "제조완료" 버튼: 제조 완료 시 표시

#### 5.6.2 레이아웃
- 주문 목록은 세로로 나열
- 각 주문 항목은 명확하게 구분되어 표시
- 주문이 많을 경우 스크롤 가능한 영역
- 최신 주문이 상단에 표시 (최신순 정렬)

#### 5.6.3 기능 요구사항
- 주문 목록은 실시간으로 업데이트
- "주문 접수" 버튼 클릭 시:
  - 주문 상태가 "주문 접수"로 변경
  - 대시보드의 "주문 접수" 통계 증가
  - 버튼이 "제조 중" 버튼으로 변경
- "제조 중" 버튼 클릭 시:
  - 주문 상태가 "제조 중"으로 변경
  - 대시보드의 "제조 중" 통계 증가, "주문 접수" 통계 감소
  - 버튼이 "제조완료" 버튼으로 변경
- "제조완료" 버튼 클릭 시:
  - 주문 상태가 "제조완료"로 변경
  - 대시보드의 "제조완료" 통계 증가, "제조 중" 통계 감소
  - 해당 제품의 재고 자동 감소 (선택사항)
- 주문 상태 변경 시 서버에 즉시 반영
- 주문 상태별로 시각적 구분 (색상, 아이콘 등)

### 5.7 데이터 구조

#### 5.7.1 재고 데이터
```javascript
{
  productId: number,
  productName: string,
  stock: number  // 현재 재고 수량
}
```

#### 5.7.2 주문 상태 데이터
```javascript
{
  orderId: number,
  orderDate: timestamp,  // 주문 일시
  items: [
    {
      productId: number,
      productName: string,
      options: array,
      quantity: number,
      price: number
    }
  ],
  totalAmount: number,
  status: string  // "대기", "주문접수", "제조중", "제조완료"
}
```

#### 5.7.3 대시보드 통계 데이터
```javascript
{
  totalOrders: number,      // 총 주문 건수
  receivedOrders: number,    // 주문 접수 건수
  inProgressOrders: number,  // 제조 중 건수
  completedOrders: number   // 제조완료 건수
}
```

### 5.8 사용자 인터랙션 시나리오

1. **재고 관리**
   - 관리자가 제품별 재고 카드에서 "+" 또는 "-" 버튼 클릭
   - 재고 수량이 즉시 업데이트되고 서버에 반영

2. **주문 접수**
   - 관리자가 주문 현황에서 "주문 접수" 버튼 클릭
   - 주문 상태가 변경되고 대시보드 통계 업데이트

3. **제조 상태 관리**
   - 관리자가 "제조 중" 버튼 클릭하여 제조 시작
   - 제조 완료 후 "제조완료" 버튼 클릭하여 완료 처리

4. **대시보드 확인**
   - 관리자가 대시보드에서 전체 주문 현황을 한눈에 확인

### 5.9 UI/UX 요구사항
- 반응형 디자인: 모바일, 태블릿, 데스크톱 지원
- 직관적인 레이아웃: 관리자가 쉽게 재고와 주문을 관리할 수 있도록
- 실시간 업데이트: 재고 변경 및 주문 상태 변경 시 즉시 반영
- 명확한 상태 표시: 주문 상태별로 시각적으로 구분
- 효율적인 정보 표시: 중요한 정보를 한눈에 파악할 수 있도록
- 버튼 피드백: 버튼 클릭 시 명확한 시각적 피드백 제공

## 6. 백엔드 개발 PRD

### 6.1 데이터 모델

#### 6.1.1 Menus (메뉴)
커피 메뉴 정보를 저장하는 테이블입니다.

**필드:**
- `id` (Primary Key): 메뉴 고유 ID
- `name` (String): 커피 이름 (예: "아메리카노(ICE)", "카페라떼")
- `description` (String): 메뉴 설명
- `price` (Number): 기본 가격
- `imageUrl` (String): 이미지 URL
- `stock` (Number): 재고 수량
- `createdAt` (Timestamp): 생성 일시
- `updatedAt` (Timestamp): 수정 일시

**예시 데이터:**
```javascript
{
  id: 1,
  name: "아메리카노(ICE)",
  description: "시원하고 깔끔한 아이스 아메리카노",
  price: 4000,
  imageUrl: "https://images.unsplash.com/...",
  stock: 10,
  createdAt: "2024-01-01T00:00:00Z",
  updatedAt: "2024-01-01T00:00:00Z"
}
```

#### 6.1.2 Options (옵션)
메뉴에 추가할 수 있는 옵션 정보를 저장하는 테이블입니다.

**필드:**
- `id` (Primary Key): 옵션 고유 ID
- `name` (String): 옵션 이름 (예: "샷 추가", "시럽 추가")
- `price` (Number): 옵션 추가 가격
- `menuId` (Foreign Key): 연결된 메뉴 ID (Menus 테이블 참조)
- `createdAt` (Timestamp): 생성 일시
- `updatedAt` (Timestamp): 수정 일시

**예시 데이터:**
```javascript
{
  id: 1,
  name: "샷 추가",
  price: 500,
  menuId: 1,
  createdAt: "2024-01-01T00:00:00Z",
  updatedAt: "2024-01-01T00:00:00Z"
}
```

#### 6.1.3 Orders (주문)
주문 정보를 저장하는 테이블입니다.

**필드:**
- `id` (Primary Key): 주문 고유 ID
- `orderDate` (Timestamp): 주문 일시
- `status` (String): 주문 상태 ("주문접수", "제조중", "제조완료")
- `totalAmount` (Number): 총 주문 금액
- `createdAt` (Timestamp): 생성 일시
- `updatedAt` (Timestamp): 수정 일시

**예시 데이터:**
```javascript
{
  id: 1,
  orderDate: "2024-01-01T13:00:00Z",
  status: "주문접수",
  totalAmount: 12500,
  createdAt: "2024-01-01T13:00:00Z",
  updatedAt: "2024-01-01T13:00:00Z"
}
```

#### 6.1.4 OrderItems (주문 항목)
주문에 포함된 각 메뉴 항목 정보를 저장하는 테이블입니다.

**필드:**
- `id` (Primary Key): 주문 항목 고유 ID
- `orderId` (Foreign Key): 주문 ID (Orders 테이블 참조)
- `menuId` (Foreign Key): 메뉴 ID (Menus 테이블 참조)
- `quantity` (Number): 주문 수량
- `price` (Number): 해당 항목의 총 가격 (메뉴 가격 + 옵션 가격) * 수량
- `createdAt` (Timestamp): 생성 일시

**예시 데이터:**
```javascript
{
  id: 1,
  orderId: 1,
  menuId: 1,
  quantity: 2,
  price: 9000,
  createdAt: "2024-01-01T13:00:00Z"
}
```

#### 6.1.5 OrderItemOptions (주문 항목 옵션)
주문 항목에 선택된 옵션 정보를 저장하는 테이블입니다.

**필드:**
- `id` (Primary Key): 주문 항목 옵션 고유 ID
- `orderItemId` (Foreign Key): 주문 항목 ID (OrderItems 테이블 참조)
- `optionId` (Foreign Key): 옵션 ID (Options 테이블 참조)
- `createdAt` (Timestamp): 생성 일시

**예시 데이터:**
```javascript
{
  id: 1,
  orderItemId: 1,
  optionId: 1,
  createdAt: "2024-01-01T13:00:00Z"
}
```

### 6.2 데이터 스키마를 위한 사용자 흐름

#### 6.2.1 메뉴 조회 및 표시
1. **프론트엔드 요청**: "주문하기" 화면 진입 시 메뉴 목록 요청
2. **백엔드 처리**: 
   - Menus 테이블에서 모든 메뉴 정보 조회
   - 각 메뉴에 연결된 Options 정보 조회 (JOIN 또는 별도 쿼리)
   - 재고 수량(stock)은 관리자 화면에만 표시되도록 필터링 (선택사항)
3. **응답**: 메뉴 목록과 옵션 정보를 JSON 형식으로 반환
4. **프론트엔드 표시**: 받은 데이터를 화면에 표시

#### 6.2.2 장바구니 관리
1. **프론트엔드**: 사용자가 메뉴 선택 및 옵션 선택 (클라이언트 측 상태 관리)
2. **데이터 저장**: 주문 전까지는 클라이언트 측(세션/로컬스토리지)에서 관리

#### 6.2.3 주문 생성
1. **프론트엔드 요청**: 사용자가 "주문하기" 버튼 클릭 시 주문 정보 전송
2. **백엔드 처리**:
   - Orders 테이블에 주문 정보 저장 (orderDate, status: "주문접수", totalAmount)
   - OrderItems 테이블에 주문 항목 저장 (orderId, menuId, quantity, price)
   - OrderItemOptions 테이블에 선택된 옵션 저장 (orderItemId, optionId)
3. **응답**: 생성된 주문 ID와 주문 정보 반환
4. **프론트엔드**: 주문 완료 메시지 표시 및 장바구니 초기화

#### 6.2.4 주문 현황 조회
1. **프론트엔드 요청**: 관리자 화면 진입 시 주문 목록 요청
2. **백엔드 처리**:
   - Orders 테이블에서 주문 정보 조회 (status가 "제조완료"가 아닌 주문만)
   - 각 주문의 OrderItems 조회
   - 각 OrderItem의 OrderItemOptions 조회
   - 주문 일시 기준 최신순 정렬
3. **응답**: 주문 목록과 상세 정보를 JSON 형식으로 반환
4. **프론트엔드 표시**: 관리자 화면의 "주문 현황" 영역에 표시

#### 6.2.5 주문 상태 변경
1. **프론트엔드 요청**: 관리자가 주문 상태 버튼 클릭 시 상태 변경 요청
2. **백엔드 처리**:
   - Orders 테이블에서 해당 주문의 status 업데이트
   - 상태가 "제조완료"로 변경되는 경우:
     - 해당 주문의 OrderItems를 조회
     - 각 OrderItem의 menuId와 quantity를 확인
     - Menus 테이블에서 해당 메뉴의 stock을 quantity만큼 감소
     - 재고가 0 미만으로 내려가지 않도록 검증
3. **응답**: 업데이트된 주문 정보 반환
4. **프론트엔드**: 주문 현황 화면 업데이트

#### 6.2.6 재고 관리
1. **프론트엔드 요청**: 관리자가 재고 조회 요청
2. **백엔드 처리**:
   - Menus 테이블에서 모든 메뉴의 재고 정보 조회
3. **응답**: 재고 정보를 JSON 형식으로 반환
4. **프론트엔드 표시**: 관리자 화면의 "재고 현황" 영역에 표시

5. **재고 수정**:
   - 관리자가 "+" 또는 "-" 버튼 클릭 시 재고 변경 요청
   - Menus 테이블에서 해당 메뉴의 stock 업데이트
   - 재고가 0 미만으로 내려가지 않도록 검증
   - 업데이트된 재고 정보 반환

### 6.3 API 설계

#### 6.3.1 메뉴 관련 API

**GET /api/menus**
- **설명**: 모든 메뉴 목록 조회
- **요청**: 없음
- **응답**:
```javascript
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "아메리카노(ICE)",
      "description": "시원하고 깔끔한 아이스 아메리카노",
      "price": 4000,
      "imageUrl": "https://images.unsplash.com/...",
      "stock": 10,
      "options": [
        {
          "id": 1,
          "name": "샷 추가",
          "price": 500
        },
        {
          "id": 2,
          "name": "시럽 추가",
          "price": 0
        }
      ]
    }
  ]
}
```

**GET /api/menus/:id**
- **설명**: 특정 메뉴 상세 정보 조회
- **요청 파라미터**: `id` (메뉴 ID)
- **응답**:
```javascript
{
  "success": true,
  "data": {
    "id": 1,
    "name": "아메리카노(ICE)",
    "description": "시원하고 깔끔한 아이스 아메리카노",
    "price": 4000,
    "imageUrl": "https://images.unsplash.com/...",
    "stock": 10,
    "options": [...]
  }
}
```

#### 6.3.2 주문 관련 API

**POST /api/orders**
- **설명**: 새 주문 생성
- **요청 본문**:
```javascript
{
  "items": [
    {
      "menuId": 1,
      "quantity": 2,
      "selectedOptions": [1, 2],  // 옵션 ID 배열
      "price": 9000  // (4000 + 500 + 0) * 2
    },
    {
      "menuId": 3,
      "quantity": 1,
      "selectedOptions": [],
      "price": 5000
    }
  ],
  "totalAmount": 14000
}
```
- **응답**:
```javascript
{
  "success": true,
  "data": {
    "id": 1,
    "orderDate": "2024-01-01T13:00:00Z",
    "status": "주문접수",
    "totalAmount": 14000,
    "items": [...]
  }
}
```

**GET /api/orders**
- **설명**: 주문 목록 조회 (관리자 화면용)
- **쿼리 파라미터** (선택사항):
  - `status`: 주문 상태 필터 ("주문접수", "제조중", "제조완료")
  - `excludeCompleted`: true인 경우 "제조완료" 상태 제외
- **응답**:
```javascript
{
  "success": true,
  "data": [
    {
      "id": 1,
      "orderDate": "2024-01-01T13:00:00Z",
      "status": "주문접수",
      "totalAmount": 14000,
      "items": [
        {
          "id": 1,
          "menuId": 1,
          "menuName": "아메리카노(ICE)",
          "quantity": 2,
          "price": 9000,
          "options": [
            {
              "id": 1,
              "name": "샷 추가",
              "price": 500
            }
          ]
        }
      ]
    }
  ]
}
```

**GET /api/orders/:id**
- **설명**: 특정 주문 상세 정보 조회
- **요청 파라미터**: `id` (주문 ID)
- **응답**:
```javascript
{
  "success": true,
  "data": {
    "id": 1,
    "orderDate": "2024-01-01T13:00:00Z",
    "status": "주문접수",
    "totalAmount": 14000,
    "items": [...]
  }
}
```

**PATCH /api/orders/:id/status**
- **설명**: 주문 상태 변경
- **요청 파라미터**: `id` (주문 ID)
- **요청 본문**:
```javascript
{
  "status": "제조중"  // "주문접수", "제조중", "제조완료"
}
```
- **응답**:
```javascript
{
  "success": true,
  "data": {
    "id": 1,
    "orderDate": "2024-01-01T13:00:00Z",
    "status": "제조중",
    "totalAmount": 14000,
    "items": [...]
  }
}
```
- **비고**: 
  - 상태가 "제조완료"로 변경될 때 해당 주문의 메뉴 재고를 자동으로 차감
  - 재고 부족 시 에러 반환

#### 6.3.3 재고 관련 API

**GET /api/inventory**
- **설명**: 모든 메뉴의 재고 정보 조회 (관리자 화면용)
- **요청**: 없음
- **응답**:
```javascript
{
  "success": true,
  "data": [
    {
      "productId": 1,
      "productName": "아메리카노(ICE)",
      "stock": 10
    },
    {
      "productId": 2,
      "productName": "아메리카노(HOT)",
      "stock": 8
    }
  ]
}
```

**PATCH /api/inventory/:id**
- **설명**: 특정 메뉴의 재고 수량 변경
- **요청 파라미터**: `id` (메뉴 ID)
- **요청 본문**:
```javascript
{
  "change": 1  // 증가: 양수, 감소: 음수
}
```
- **응답**:
```javascript
{
  "success": true,
  "data": {
    "productId": 1,
    "productName": "아메리카노(ICE)",
    "stock": 11
  }
}
```
- **비고**: 재고가 0 미만으로 내려가지 않도록 검증

#### 6.3.4 통계 관련 API

**GET /api/stats/dashboard**
- **설명**: 관리자 대시보드 통계 정보 조회
- **요청**: 없음
- **응답**:
```javascript
{
  "success": true,
  "data": {
    "totalOrders": 15,        // 제조완료되지 않은 주문의 총 수량
    "receivedOrders": 5,       // 주문접수 상태인 주문 건수
    "inProgressOrders": 3,     // 제조중 상태인 주문 건수
    "completedOrders": "20 / 7"  // 제조완료 커피 수량 / 제조완료 주문 건수
  }
}
```

### 6.4 에러 처리

모든 API는 다음과 같은 에러 응답 형식을 사용합니다:

```javascript
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "에러 메시지"
  }
}
```

**주요 에러 코드:**
- `NOT_FOUND`: 리소스를 찾을 수 없음
- `INVALID_REQUEST`: 잘못된 요청 데이터
- `INSUFFICIENT_STOCK`: 재고 부족
- `INTERNAL_ERROR`: 서버 내부 오류

### 6.5 데이터베이스 관계도

```
Menus (1) ──< (N) Options
  │
  │ (1)
  │
  └──< (N) OrderItems ──< (N) OrderItemOptions ──> (1) Options
        │
        │ (N)
        │
        └──> (1) Orders
```

### 6.6 구현 우선순위

1. **1단계**: 데이터베이스 스키마 설계 및 생성
   - Menus, Options, Orders, OrderItems, OrderItemOptions 테이블 생성

2. **2단계**: 기본 CRUD API 구현
   - GET /api/menus (메뉴 목록 조회)
   - POST /api/orders (주문 생성)
   - GET /api/orders (주문 목록 조회)

3. **3단계**: 주문 상태 관리 API
   - PATCH /api/orders/:id/status (주문 상태 변경)
   - 제조완료 시 재고 차감 로직 구현

4. **4단계**: 재고 관리 API
   - GET /api/inventory (재고 조회)
   - PATCH /api/inventory/:id (재고 수정)

5. **5단계**: 통계 API
   - GET /api/stats/dashboard (대시보드 통계)

6. **6단계**: 에러 처리 및 검증 로직 추가